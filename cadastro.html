<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro - Silva Comunicação</title>
    <link rel="icon" type="image/png" href="icone.png">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <style>
        :root {
            --primary: #fc0303; 
            --bg-body: #0a0a0a;
            --bg-card: rgba(30, 30, 30, 0.6);
            --text-main: #f8fafc;
            --text-muted: #a1a1aa;
            --border: rgba(255, 255, 255, 0.08);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; font-size: 8pt; }

        body {
            background-color: var(--bg-body);
            color: var(--text-main);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background: radial-gradient(circle at center, #2d0a0a 0%, #0a0a0a 100%);
            padding: 20px;
        }

        .register-container {
            background: var(--bg-card);
            backdrop-filter: blur(15px);
            padding: 30px;
            border-radius: 12px;
            border: 1px solid var(--border);
            width: 100%;
            max-width: 450px;
            text-align: center;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.6);
        }

        .register-container img { height: 50px; margin-bottom: 20px; }
        h2 { font-size: 12pt; font-weight: 800; margin-bottom: 20px; text-transform: uppercase; letter-spacing: 1px; }

        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; text-align: left; }
        .input-group { margin-bottom: 15px; }
        .full-width { grid-column: span 2; }
        .input-group label { display: block; margin-bottom: 5px; color: var(--text-muted); }

        .password-field { position: relative; display: flex; align-items: center; }

        .input-group input {
            width: 100%;
            padding: 12px;
            padding-right: 35px;
            border-radius: 8px;
            border: 1px solid var(--border);
            background: rgba(255, 255, 255, 0.05);
            color: white;
            outline: none;
            transition: 0.3s;
        }

        .input-group input:focus { border-color: var(--primary); }

        .toggle-password { position: absolute; right: 12px; cursor: pointer; color: var(--text-muted); font-size: 1.2rem; }
        .toggle-password:hover { color: var(--primary); }

        .btn-register {
            width: 100%;
            padding: 12px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 800;
            cursor: pointer;
            text-transform: uppercase;
            margin-top: 10px;
            transition: 0.3s;
        }

        .btn-register:hover { background: #be123c; box-shadow: 0 0 15px rgba(252, 3, 3, 0.3); }

        .footer-links { margin-top: 20px; color: var(--text-muted); }
        .footer-links a { color: var(--primary); text-decoration: none; font-weight: 600; }

        @media (max-width: 480px) {
            .form-grid { grid-template-columns: 1fr; }
            .full-width { grid-column: span 1; }
        }
    </style>
</head>
<body>

    <div class="register-container">
        <img src="logo.png" alt="Silva">
        <h2>Criar Nova Conta</h2>
        
        <form id="registerForm">
            <div class="form-grid">
                <div class="input-group">
                    <label>Nome</label>
                    <input type="text" id="nome" placeholder="Seu nome" required>
                </div>
                
                <div class="input-group">
                    <label>Sobrenome</label>
                    <input type="text" id="sobrenome" placeholder="Seu sobrenome" required>
                </div>

                <div class="input-group full-width">
                    <label>E-mail</label>
                    <input type="email" id="email" placeholder="exemplo@email.com" required>
                </div>

                <div class="input-group">
                    <label>Senha</label>
                    <div class="password-field">
                        <input type="password" id="senha" class="password-input" placeholder="••••••••" required minlength="6">
                        <i class="ph ph-eye toggle-password"></i>
                    </div>
                </div>

                <div class="input-group">
                    <label>Confirmar Senha</label>
                    <div class="password-field">
                        <input type="password" id="confirmarSenha" class="password-input" placeholder="••••••••" required minlength="6">
                        <i class="ph ph-eye toggle-password"></i>
                    </div>
                </div>
            </div>
            
            <button type="submit" class="btn-register" id="btnSubmit">Finalizar Cadastro</button>
        </form>

        <div class="footer-links">
            Já possui uma conta? <a href="login.html">Fazer Login</a>
        </div>

        <a href="index.html" style="margin-top: 15px; display: inline-block; color: var(--text-muted); text-decoration: none;">
            <i class="ph ph-arrow-left"></i> Voltar para a loja
        </a>
    </div>

<script type="module">
    // Usando a versão compatível com arquivos locais
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

    const firebaseConfig = {
        apiKey: "AIzaSyB9OABRkjQ9PKtuj9IZ2pk9PxGeaPVN2CQ",
        authDomain: "silva-artes.firebaseapp.com",
        projectId: "silva-artes",
        storageBucket: "silva-artes.firebasestorage.app",
        messagingSenderId: "791520332158",
        appId: "1:791520332158:web:eae65a41c6d6e5d924cb2f"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    // Teste de conexão no console
    console.log("Sistema Silva Artes conectado ao Firebase!");

    const registerForm = document.getElementById('registerForm');
    
    registerForm.addEventListener('submit', async (e) => {
        e.preventDefault();
        console.log("Botão clicado, iniciando cadastro...");

        const email = document.getElementById('email').value;
        const senha = document.getElementById('senha').value;
        const confirmar = document.getElementById('confirmarSenha').value;
        const btn = document.getElementById('btnSubmit');

        if (senha !== confirmar) {
            alert("As senhas não coincidem!");
            return;
        }

        btn.innerText = "CRIANDO CONTA...";
        btn.disabled = true;

        try {
            await createUserWithEmailAndPassword(auth, email, senha);
            alert('Conta criada com sucesso!');
            window.location.href = 'login.html';
        } catch (error) {
            btn.innerText = "FINALIZAR CADASTRO";
            btn.disabled = false;
            console.error("Erro detalhado:", error.code);
            
            if (error.code === 'auth/email-already-in-use') {
                alert("Este e-mail já está sendo usado.");
            } else if (error.code === 'auth/weak-password') {
                alert("A senha deve ter pelo menos 6 caracteres.");
            } else {
                alert("Erro ao cadastrar: " + error.message);
            }
        }
    });
</script>
</body>
</html>